<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="954px" preserveAspectRatio="none" style="width:2605px;height:954px;background:#FFFFFF;" version="1.1" viewBox="0 0 2605 954" width="2605px" zoomAndPan="magnify"><defs/><g><!--MD5=[fd20ec58b7570fc6f3219eb9b2bb932a]
cluster org.renaultleat.consensus--><g id="cluster_org.renaultleat.consensus"><path d="M8.5,6 L217.5,6 A3.75,3.75 0 0 1 220,8.5 L227,28.2969 L2595.5,28.2969 A2.5,2.5 0 0 1 2598,30.7969 L2598,944.5 A2.5,2.5 0 0 1 2595.5,947 L8.5,947 A2.5,2.5 0 0 1 6,944.5 L6,8.5 A2.5,2.5 0 0 1 8.5,6 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="6" x2="227" y1="28.2969" y2="28.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="208" x="10" y="20.9951">org.renaultleat.consensus</text></g><!--MD5=[783c5a55039a6aaff3586e7a5f91c2eb]
class BFTMessageHandler--><g id="elem_BFTMessageHandler"><rect codeLine="2" fill="#F1F1F1" height="308.75" id="BFTMessageHandler" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="1869" x="22.5" y="122.5"/><ellipse cx="881.25" cy="138.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M884.2188,144.1406 Q883.6406,144.4375 883,144.5781 Q882.3594,144.7344 881.6563,144.7344 Q879.1563,144.7344 877.8281,143.0938 Q876.5156,141.4375 876.5156,138.3125 Q876.5156,135.1875 877.8281,133.5313 Q879.1563,131.875 881.6563,131.875 Q882.3594,131.875 883,132.0313 Q883.6563,132.1875 884.2188,132.4844 L884.2188,135.2031 Q883.5938,134.625 883,134.3594 Q882.4063,134.0781 881.7813,134.0781 Q880.4375,134.0781 879.75,135.1563 Q879.0625,136.2188 879.0625,138.3125 Q879.0625,140.4063 879.75,141.4844 Q880.4375,142.5469 881.7813,142.5469 Q882.4063,142.5469 883,142.2813 Q883.5938,142 884.2188,141.4219 L884.2188,144.1406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="143" x="901.75" y="143.3467">BFTMessageHandler</text><line style="stroke:#181818;stroke-width:0.5;" x1="23.5" x2="1890.5" y1="154.5" y2="154.5"/><ellipse cx="33.5" cy="168.1484" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="148" x="42.5" y="171.4951">blockPool : BlockPool</text><ellipse cx="33.5" cy="184.4453" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="162" x="42.5" y="187.792">blockchain : Blockchain</text><ellipse cx="33.5" cy="200.7422" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="134" x="42.5" y="204.0889">currentuser : String</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="30.5" y="214.0391"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="121" x="42.5" y="220.3857">minapprovals : int</text><ellipse cx="33.5" cy="233.3359" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="288" x="42.5" y="236.6826">nodeCommunicator : NodeCommunicator</text><ellipse cx="33.5" cy="249.6328" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="186" x="42.5" y="252.9795">nonValidator : NonValidator</text><ellipse cx="33.5" cy="265.9297" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="253" x="42.5" y="269.2764">BFTMessagePool : BFTMessagePool</text><ellipse cx="33.5" cy="282.2266" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="231" x="42.5" y="285.5732">transactionPool : TransactionPool</text><ellipse cx="33.5" cy="298.5234" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="129" x="42.5" y="301.8701">validator : Validator</text><ellipse cx="33.5" cy="314.8203" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93" x="42.5" y="318.167">wallet : Wallet</text><line style="stroke:#181818;stroke-width:0.5;" x1="23.5" x2="1890.5" y1="325.4688" y2="325.4688"/><ellipse cx="33.5" cy="339.1172" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="1843" x="42.5" y="342.4639">BFTMessageHandler(blockChain : Blockchain, transactionPool : TransactionPool, wallet : Wallet, BFTMessagePool : BFTMessagePool, validator : Validator, nonValidator : NonValidator, nodeCommunicator : NodeCommunicator, blockpool : BlockPool, currentuser : String)</text><ellipse cx="33.5" cy="355.4141" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="365" x="42.5" y="358.7607">broadCastCommit(data : Message, message : String)</text><ellipse cx="33.5" cy="371.7109" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="371" x="42.5" y="375.0576">broadCastPrePrepare(block : Block, message : String)</text><ellipse cx="33.5" cy="388.0078" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="366" x="42.5" y="391.3545">broadCastPrepare(data : Message, message : String)</text><ellipse cx="33.5" cy="404.3047" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="504" x="42.5" y="407.6514">broadCastRoundChange(data : Message, message : String, user : String)</text><ellipse cx="33.5" cy="420.6016" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="285" x="42.5" y="423.9482">handleMessage(jsonObject : JSONObject)</text></g><!--MD5=[f2af29731e4f0888f8dde78e6ea58f79]
class BFTMessagePool--><g id="elem_BFTMessagePool"><rect codeLine="20" fill="#F1F1F1" height="471.7188" id="BFTMessagePool" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="655" x="1926.5" y="41"/><ellipse cx="2189.75" cy="57" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M2192.7188,62.6406 Q2192.1406,62.9375 2191.5,63.0781 Q2190.8594,63.2344 2190.1563,63.2344 Q2187.6563,63.2344 2186.3281,61.5938 Q2185.0156,59.9375 2185.0156,56.8125 Q2185.0156,53.6875 2186.3281,52.0313 Q2187.6563,50.375 2190.1563,50.375 Q2190.8594,50.375 2191.5,50.5313 Q2192.1563,50.6875 2192.7188,50.9844 L2192.7188,53.7031 Q2192.0938,53.125 2191.5,52.8594 Q2190.9063,52.5781 2190.2813,52.5781 Q2188.9375,52.5781 2188.25,53.6563 Q2187.5625,54.7188 2187.5625,56.8125 Q2187.5625,58.9063 2188.25,59.9844 Q2188.9375,61.0469 2190.2813,61.0469 Q2190.9063,61.0469 2191.5,60.7813 Q2192.0938,60.5 2192.7188,59.9219 L2192.7188,62.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120" x="2210.25" y="61.8467">BFTMessagePool</text><line style="stroke:#181818;stroke-width:0.5;" x1="1927.5" x2="2580.5" y1="73" y2="73"/><ellipse cx="1937.5" cy="86.6484" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="406" x="1946.5" y="89.9951">commitPool : Map&lt;String, CopyOnWriteArrayList&lt;String&gt;&gt;</text><ellipse cx="1937.5" cy="102.9453" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="409" x="1946.5" y="106.292">preparePool : Map&lt;String, CopyOnWriteArrayList&lt;String&gt;&gt;</text><ellipse cx="1937.5" cy="119.2422" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="450" x="1946.5" y="122.5889">roundChangePool : Map&lt;String, CopyOnWriteArrayList&lt;String&gt;&gt;</text><line style="stroke:#181818;stroke-width:0.5;" x1="1927.5" x2="2580.5" y1="129.8906" y2="129.8906"/><ellipse cx="1937.5" cy="143.5391" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="130" x="1946.5" y="146.8857">BFTMessagePool()</text><ellipse cx="1937.5" cy="159.8359" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="308" x="1946.5" y="163.1826">addMessage(message : Message) : boolean</text><ellipse cx="1937.5" cy="176.1328" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="151" x="1946.5" y="179.4795">clearAllMessagePool()</text><ellipse cx="1937.5" cy="192.4297" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="370" x="1946.5" y="195.7764">clearAllMessagePoolForBlockHash(blockhash : String)</text><ellipse cx="1937.5" cy="208.7266" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="408" x="1946.5" y="212.0732">clearCommitMessagePoolForBlockHash(blockhash : String)</text><ellipse cx="1937.5" cy="225.0234" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="409" x="1946.5" y="228.3701">clearPrepareMessagePoolForBlockHash(blockhash : String)</text><ellipse cx="1937.5" cy="241.3203" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="455" x="1946.5" y="244.667">clearRoundChangeMessagePoolForBlockHash(blockhash : String)</text><ellipse cx="1937.5" cy="257.6172" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="388" x="1946.5" y="260.9639">existingCommitMessage(message : Message) : boolean</text><ellipse cx="1937.5" cy="273.9141" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="335" x="1946.5" y="277.2607">existingMessage(message : Message) : boolean</text><ellipse cx="1937.5" cy="290.2109" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="389" x="1946.5" y="293.5576">existingPrepareMessage(message : Message) : boolean</text><ellipse cx="1937.5" cy="306.5078" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="435" x="1946.5" y="309.8545">existingRoundChangeMessage(message : Message) : boolean</text><ellipse cx="1937.5" cy="322.8047" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="454" x="1946.5" y="326.1514">getCommmitPool() : Map&lt;String, CopyOnWriteArrayList&lt;String&gt;&gt;</text><ellipse cx="1937.5" cy="339.1016" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="442" x="1946.5" y="342.4482">getPreparePool() : Map&lt;String, CopyOnWriteArrayList&lt;String&gt;&gt;</text><ellipse cx="1937.5" cy="355.3984" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="488" x="1946.5" y="358.7451">getRoundChangePool() : Map&lt;String, CopyOnWriteArrayList&lt;String&gt;&gt;</text><ellipse cx="1937.5" cy="371.6953" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="470" x="1946.5" y="375.042">getSizeofCommitMessagePoolForBlockHash(blockhash : String) : int</text><ellipse cx="1937.5" cy="387.9922" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="471" x="1946.5" y="391.3389">getSizeofPrepareMessagePoolForBlockHash(blockhash : String) : int</text><ellipse cx="1937.5" cy="404.2891" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="517" x="1946.5" y="407.6357">getSizeofRoundChangeMessagePoolForBlockHash(blockhash : String) : int</text><ellipse cx="1937.5" cy="420.5859" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="325" x="1946.5" y="423.9326">isValidMessage(message : Message) : boolean</text><ellipse cx="1937.5" cy="436.8828" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="565" x="1946.5" y="440.2295">message(type : String, block : Block, wallet : Wallet, roundCounter : int) : Message</text><ellipse cx="1937.5" cy="453.1797" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="629" x="1946.5" y="456.5264">message(type : String, inmessage : Message, wallet : Wallet, roundCounter : int) : Message</text><ellipse cx="1937.5" cy="469.4766" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="547" x="1946.5" y="472.8232">setCommmitPool(commmitPool : Map&lt;String, CopyOnWriteArrayList&lt;String&gt;&gt;)</text><ellipse cx="1937.5" cy="485.7734" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="525" x="1946.5" y="489.1201">setPreparePool(preparePool : Map&lt;String, CopyOnWriteArrayList&lt;String&gt;&gt;)</text><ellipse cx="1937.5" cy="502.0703" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="612" x="1946.5" y="505.417">setRoundChangePool(roundChangePool : Map&lt;String, CopyOnWriteArrayList&lt;String&gt;&gt;)</text></g><!--MD5=[bea5b0d46523efab5ea1c1d339f396f0]
class Message--><g id="elem_Message"><rect codeLine="48" fill="#F1F1F1" height="357.6406" id="Message" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="882" x="516" y="573"/><ellipse cx="921.25" cy="589" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M924.2188,594.6406 Q923.6406,594.9375 923,595.0781 Q922.3594,595.2344 921.6563,595.2344 Q919.1563,595.2344 917.8281,593.5938 Q916.5156,591.9375 916.5156,588.8125 Q916.5156,585.6875 917.8281,584.0313 Q919.1563,582.375 921.6563,582.375 Q922.3594,582.375 923,582.5313 Q923.6563,582.6875 924.2188,582.9844 L924.2188,585.7031 Q923.5938,585.125 923,584.8594 Q922.4063,584.5781 921.7813,584.5781 Q920.4375,584.5781 919.75,585.6563 Q919.0625,586.7188 919.0625,588.8125 Q919.0625,590.9063 919.75,591.9844 Q920.4375,593.0469 921.7813,593.0469 Q922.4063,593.0469 923,592.7813 Q923.5938,592.5 924.2188,591.9219 L924.2188,594.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63" x="941.75" y="593.8467">Message</text><line style="stroke:#181818;stroke-width:0.5;" x1="517" x2="1397" y1="605" y2="605"/><polygon fill="none" points="527,614.6484,523,620.6484,531,620.6484" style="stroke:#1963A0;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125" x="536" y="621.9951">blockHash : String</text><polygon fill="none" points="527,630.9453,523,636.9453,531,636.9453" style="stroke:#1963A0;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="115" x="536" y="638.292">contents : String</text><polygon fill="none" points="527,647.2422,523,653.2422,531,653.2422" style="stroke:#1963A0;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="167" x="536" y="654.5889">messageSender : String</text><polygon fill="none" points="527,663.5391,523,669.5391,531,669.5391" style="stroke:#1963A0;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="182" x="536" y="670.8857">messagesignature : String</text><polygon fill="none" points="527,679.8359,523,685.8359,531,685.8359" style="stroke:#1963A0;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71" x="536" y="687.1826">round : int</text><polygon fill="none" points="527,696.1328,523,702.1328,531,702.1328" style="stroke:#1963A0;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="536" y="703.4795">type : String</text><line style="stroke:#181818;stroke-width:0.5;" x1="517" x2="1397" y1="710.7813" y2="710.7813"/><ellipse cx="527" cy="724.4297" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="856" x="536" y="727.7764">Message(type : String, blockHash : String, messagesignature : String, messageSender : String, contents : String, round : int)</text><ellipse cx="527" cy="740.7266" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="159" x="536" y="744.0732">getBlockHash() : String</text><ellipse cx="527" cy="757.0234" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="150" x="536" y="760.3701">getContents() : String</text><ellipse cx="527" cy="773.3203" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="199" x="536" y="776.667">getMessageSender() : String</text><ellipse cx="527" cy="789.6172" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="214" x="536" y="792.9639">getMessagesignature() : String</text><ellipse cx="527" cy="805.9141" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="109" x="536" y="809.2607">getRound() : int</text><ellipse cx="527" cy="822.2109" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120" x="536" y="825.5576">getType() : String</text><ellipse cx="527" cy="838.5078" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="230" x="536" y="841.8545">setBlockHash(blockHash : String)</text><ellipse cx="527" cy="854.8047" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="211" x="536" y="858.1514">setContents(contents : String)</text><ellipse cx="527" cy="871.1016" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="312" x="536" y="874.4482">setMessageSender(messageSender : String)</text><ellipse cx="527" cy="887.3984" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="342" x="536" y="890.7451">setMessagesignature(messagesignature : String)</text><ellipse cx="527" cy="903.6953" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="149" x="536" y="907.042">setRound(round : int)</text><ellipse cx="527" cy="919.9922" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="149" x="536" y="923.3389">setType(type : String)</text></g><!--MD5=[53137ec93420175360498e8c70990a98]
class Synchronizer--><g id="elem_Synchronizer"><rect codeLine="69" fill="#F1F1F1" height="162.0781" id="Synchronizer" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="429" x="1433.5" y="671"/><ellipse cx="1598.75" cy="687" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1601.7188,692.6406 Q1601.1406,692.9375 1600.5,693.0781 Q1599.8594,693.2344 1599.1563,693.2344 Q1596.6563,693.2344 1595.3281,691.5938 Q1594.0156,689.9375 1594.0156,686.8125 Q1594.0156,683.6875 1595.3281,682.0313 Q1596.6563,680.375 1599.1563,680.375 Q1599.8594,680.375 1600.5,680.5313 Q1601.1563,680.6875 1601.7188,680.9844 L1601.7188,683.7031 Q1601.0938,683.125 1600.5,682.8594 Q1599.9063,682.5781 1599.2813,682.5781 Q1597.9375,682.5781 1597.25,683.6563 Q1596.5625,684.7188 1596.5625,686.8125 Q1596.5625,688.9063 1597.25,689.9844 Q1597.9375,691.0469 1599.2813,691.0469 Q1599.9063,691.0469 1600.5,690.7813 Q1601.0938,690.5 1601.7188,689.9219 L1601.7188,692.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90" x="1619.25" y="691.8467">Synchronizer</text><line style="stroke:#181818;stroke-width:0.5;" x1="1434.5" x2="1861.5" y1="703" y2="703"/><ellipse cx="1444.5" cy="716.6484" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="361" x="1453.5" y="719.9951">commitconsensusReached : Map&lt;String, Boolean&gt;</text><ellipse cx="1444.5" cy="732.9453" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="310" x="1453.5" y="736.292">consensusReached : Map&lt;String, Boolean&gt;</text><ellipse cx="1444.5" cy="749.2422" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="206" x="1453.5" y="752.5889">consensusincourse : boolean</text><ellipse cx="1444.5" cy="765.5391" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="364" x="1453.5" y="768.8857">prepareconsensusReached : Map&lt;String, Boolean&gt;</text><ellipse cx="1444.5" cy="781.8359" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="403" x="1453.5" y="785.1826">roundchangeconsensusReached : Map&lt;String, Boolean&gt;</text><ellipse cx="1444.5" cy="798.1328" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="197" x="1453.5" y="801.4795">thresholdReached : boolean</text><line style="stroke:#181818;stroke-width:0.5;" x1="1434.5" x2="1861.5" y1="808.7813" y2="808.7813"/><ellipse cx="1444.5" cy="822.4297" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="1453.5" y="825.7764">Synchronizer()</text></g><!--MD5=[f69abb50d644d9c2e9f83a6984dc4442]
@startuml
package org.renaultleat.consensus {
  class BFTMessageHandler {
    + blockPool : BlockPool
    + blockchain : Blockchain
    + currentuser : String
    - minapprovals : int
    + nodeCommunicator : NodeCommunicator
    + nonValidator : NonValidator
    + BFTMessagePool : BFTMessagePool
    + transactionPool : TransactionPool
    + validator : Validator
    + wallet : Wallet
    + BFTMessageHandler(blockChain : Blockchain, transactionPool : TransactionPool, wallet : Wallet, BFTMessagePool : BFTMessagePool, validator : Validator, nonValidator : NonValidator, nodeCommunicator : NodeCommunicator, blockpool : BlockPool, currentuser : String)
    + broadCastCommit(data : Message, message : String)
    + broadCastPrePrepare(block : Block, message : String)
    + broadCastPrepare(data : Message, message : String)
    + broadCastRoundChange(data : Message, message : String, user : String)
    + handleMessage(jsonObject : JSONObject)
  }
  class BFTMessagePool {
    + commitPool : Map<String, CopyOnWriteArrayList<String>>
    + preparePool : Map<String, CopyOnWriteArrayList<String>>
    + roundChangePool : Map<String, CopyOnWriteArrayList<String>>
    + BFTMessagePool()
    + addMessage(message : Message) : boolean
    + clearAllMessagePool()
    + clearAllMessagePoolForBlockHash(blockhash : String)
    + clearCommitMessagePoolForBlockHash(blockhash : String)
    + clearPrepareMessagePoolForBlockHash(blockhash : String)
    + clearRoundChangeMessagePoolForBlockHash(blockhash : String)
    + existingCommitMessage(message : Message) : boolean
    + existingMessage(message : Message) : boolean
    + existingPrepareMessage(message : Message) : boolean
    + existingRoundChangeMessage(message : Message) : boolean
    + getCommmitPool() : Map<String, CopyOnWriteArrayList<String>>
    + getPreparePool() : Map<String, CopyOnWriteArrayList<String>>
    + getRoundChangePool() : Map<String, CopyOnWriteArrayList<String>>
    + getSizeofCommitMessagePoolForBlockHash(blockhash : String) : int
    + getSizeofPrepareMessagePoolForBlockHash(blockhash : String) : int
    + getSizeofRoundChangeMessagePoolForBlockHash(blockhash : String) : int
    + isValidMessage(message : Message) : boolean
    + message(type : String, block : Block, wallet : Wallet, roundCounter : int) : Message
    + message(type : String, inmessage : Message, wallet : Wallet, roundCounter : int) : Message
    + setCommmitPool(commmitPool : Map<String, CopyOnWriteArrayList<String>>)
    + setPreparePool(preparePool : Map<String, CopyOnWriteArrayList<String>>)
    + setRoundChangePool(roundChangePool : Map<String, CopyOnWriteArrayList<String>>)
  }
  class Message {
    ~ blockHash : String
    ~ contents : String
    ~ messageSender : String
    ~ messagesignature : String
    ~ round : int
    ~ type : String
    + Message(type : String, blockHash : String, messagesignature : String, messageSender : String, contents : String, round : int)
    + getBlockHash() : String
    + getContents() : String
    + getMessageSender() : String
    + getMessagesignature() : String
    + getRound() : int
    + getType() : String
    + setBlockHash(blockHash : String)
    + setContents(contents : String)
    + setMessageSender(messageSender : String)
    + setMessagesignature(messagesignature : String)
    + setRound(round : int)
    + setType(type : String)
  }
  class Synchronizer {
    + commitconsensusReached : Map<String, Boolean>
    + consensusReached : Map<String, Boolean>
    + consensusincourse : boolean
    + prepareconsensusReached : Map<String, Boolean>
    + roundchangeconsensusReached : Map<String, Boolean>
    + thresholdReached : boolean
    + Synchronizer()
  }
}
@end

PlantUML version 1.2022.7(Mon Aug 22 19:01:30 CEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>